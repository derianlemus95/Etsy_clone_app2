{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\deven\\\\OneDrive\\\\Desktop\\\\Lab2\\\\Frontend\\\\src\\\\components\\\\Home\\\\Home.js\";\nimport React, { Component } from \"react\";\nimport \"../../App.css\";\nimport axios from \"axios\";\nimport cookie from \"react-cookies\";\nimport { Redirect } from \"react-router\";\nimport Navbar from \"../LandingPage/Navbar\";\nimport Button from \"react-bootstrap/Button\";\nimport Table from \"react-bootstrap/Table\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.termChangeHandler = e => {\n      this.setState({\n        term: e.target.value\n      });\n    };\n\n    this.minPriceChangeHandler = e => {\n      this.setState({\n        minPrice: e.target.value\n      });\n    };\n\n    this.maxPriceChangeHandler = e => {\n      this.setState({\n        maxPrice: e.target.value\n      });\n    };\n\n    this.selectedOptionChangeHandler = e => {\n      this.setState({\n        selectedOption: e.target.value\n      });\n    };\n\n    this.outOfStockOptionChangeHandler = e => {\n      this.setState({\n        outOfStock: true\n      });\n    };\n\n    this.submitLogin = e => {\n      //var headers = new Headers();\n      //prevent page from refresh\n      e.preventDefault();\n      const data = {\n        term: this.state.term,\n        minPrice: this.state.minPrice,\n        maxPrice: this.state.maxPrice,\n        selectedOption: this.state.selectedOption\n      }; //set the with credentials to true\n\n      axios.defaults.withCredentials = true; //make a post request with the user data\n\n      axios.post(\"http://localhost:3001/shop/getproducts\", data).then(res => {\n        if (res) {\n          this.setState({\n            authFlag: false,\n            products: res.data\n          });\n        } else {\n          this.setState({\n            authFlag: true\n          });\n        }\n      });\n    };\n\n    this.state = {\n      products: [],\n      term: \"\",\n      minPrice: 0.0,\n      maxPrice: 0.0,\n      selectedOption: \"price\",\n      outOfStock: false,\n      authFlag: true\n    };\n    this.termChangeHandler = this.termChangeHandler.bind(this);\n    this.minPriceChangeHandler = this.minPriceChangeHandler.bind(this);\n    this.maxPriceChangeHandler = this.maxPriceChangeHandler.bind(this);\n    this.selectedOptionChangeHandler = this.selectedOptionChangeHandler.bind(this);\n    this.outOfStockOptionChangeHandler = this.outOfStockOptionChangeHandler.bind(this);\n    this.submitLogin = this.submitLogin.bind(this);\n  }\n\n  handleAddToFavorites(e) {\n    const data = {\n      username: localStorage.getItem(\"email\"),\n      id: e.target.value\n    };\n    axios.post(\"http://localhost:3001/addToFavorites\", data).then(response => {\n      if (response.status === 200) {\n        console.log(\"SUCCESS\");\n      } else if (response.status === 201) {\n        console.log(\"ERROR WITH FAVORITES\");\n      }\n    });\n  }\n\n  handleItemPage(e) {\n    let d = new Date();\n    d.setTime(d.getTime() + 25 * 60 * 1000);\n    document.cookie = \"id\" + \"=\" + e.target.value + \"; Path=/;\";\n    window.location.href = \"/product\";\n  }\n\n  componentWillMount() {\n    this.setState({\n      authFlag: true,\n      products: []\n    });\n  } //username change handler to update state variable with the text entered by the user\n\n\n  render() {\n    //iterate over books to create a table row\n    let details = this.state.products.map(product => {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: product.image && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"http://localhost:3000/\" + product.image,\n            alt: \"img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: [\"$\", product.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: \"100%\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              value: product.id,\n              onClick: this.handleAddToFavorites,\n              class: \"btn btn-success\",\n              type: \"submit\",\n              children: \"Favorite\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: \"100%\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              value: product.id,\n              onClick: this.handleItemPage,\n              class: \"btn btn-success\",\n              type: \"submit\",\n              children: \"More Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this);\n    }); //if not logged in go to login page\n\n    let redirectVar = null;\n\n    if (!localStorage.getItem(\"token\")) {\n      redirectVar = /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [redirectVar, /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Welcome to Home Page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"100%\"\n          },\n          class: \"form-group\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: this.termChangeHandler,\n            type: \"text\",\n            class: \"form-control\",\n            name: \"term\",\n            placeholder: \"Search...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"100%\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: this.submitLogin,\n            class: \"btn btn-success\",\n            type: \"submit\",\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"15%\"\n          },\n          class: \"form-check form-check-inline\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            class: \"form-check-label\",\n            for: \"inLineText1\",\n            children: \"Minimum Price:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"inLineText1\",\n            onChange: this.minPriceChangeHandler,\n            type: \"number\",\n            class: \"form-control\",\n            name: \"minPrice\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"15%\"\n          },\n          class: \"form-check form-check-inline\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            class: \"form-check-label\",\n            for: \"inLineText2\",\n            children: \"Maximum Price:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"inLineText2\",\n            onChange: this.maxPriceChangeHandler,\n            type: \"number\",\n            class: \"form-control\",\n            name: \"maxPrice\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Filter Products: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-check form-check-inline\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"inLineRadio1\",\n            type: \"radio\",\n            name: \"sortType\",\n            value: \"price\",\n            checked: this.state.selectedOption === \"price\",\n            onChange: this.selectedOptionChangeHandler,\n            class: \"form-check-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            class: \"form-check-label\",\n            for: \"inLineRadio1\",\n            children: \"Price: Low to High\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-check form-check-inline\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"inLineRadio2\",\n            type: \"radio\",\n            name: \"sortType\",\n            value: \"quantity\",\n            checked: this.state.selectedOption === \"quantity\",\n            onChange: this.selectedOptionChangeHandler,\n            class: \"form-check-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            class: \"form-check-label\",\n            for: \"inLineRadio2\",\n            children: \"Quantity: Low to High\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-check form-check-inline\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"inLineRadio3\",\n            type: \"radio\",\n            name: \"sortType\",\n            value: \"salesCount\",\n            checked: this.state.selectedOption === \"salesCount\",\n            onChange: this.selectedOptionChangeHandler,\n            class: \"form-check-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            class: \"form-check-label\",\n            for: \"inLineRadio3\",\n            children: [\" \", \"Sales Count: Low to High\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-check form-check-inline\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"inLineRadio4\",\n            type: \"checkbox\",\n            name: \"outOfStock\",\n            checked: this.state.outOfStock,\n            onChange: this.outOfStockOptionChangeHandler,\n            class: \"form-check-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            class: \"form-check-label\",\n            for: \"inLineRadio4\",\n            children: [\"Exclude Out of Stock\", \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          variant: \"dark\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price(USD)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Add to Favorites\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"More Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: details\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this);\n  }\n\n} //export Home Component\n\n\nexport default Home;","map":{"version":3,"sources":["C:/Users/deven/OneDrive/Desktop/Lab2/Frontend/src/components/Home/Home.js"],"names":["React","Component","axios","cookie","Redirect","Navbar","Button","Table","Link","Home","constructor","props","termChangeHandler","e","setState","term","target","value","minPriceChangeHandler","minPrice","maxPriceChangeHandler","maxPrice","selectedOptionChangeHandler","selectedOption","outOfStockOptionChangeHandler","outOfStock","submitLogin","preventDefault","data","state","defaults","withCredentials","post","then","res","authFlag","products","bind","handleAddToFavorites","username","localStorage","getItem","id","response","status","console","log","handleItemPage","d","Date","setTime","getTime","document","window","location","href","componentWillMount","render","details","map","product","name","image","price","width","redirectVar"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"../../App.css\";\r\nimport axios from \"axios\";\r\nimport cookie from \"react-cookies\";\r\nimport { Redirect } from \"react-router\";\r\nimport Navbar from \"../LandingPage/Navbar\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Table from \"react-bootstrap/Table\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      products: [],\r\n      term: \"\",\r\n      minPrice: 0.0,\r\n      maxPrice: 0.0,\r\n      selectedOption: \"price\",\r\n      outOfStock: false,\r\n      authFlag: true,\r\n    };\r\n    this.termChangeHandler = this.termChangeHandler.bind(this);\r\n    this.minPriceChangeHandler = this.minPriceChangeHandler.bind(this);\r\n    this.maxPriceChangeHandler = this.maxPriceChangeHandler.bind(this);\r\n    this.selectedOptionChangeHandler =\r\n      this.selectedOptionChangeHandler.bind(this);\r\n    this.outOfStockOptionChangeHandler =\r\n      this.outOfStockOptionChangeHandler.bind(this);\r\n    this.submitLogin = this.submitLogin.bind(this);\r\n  }\r\n\r\n  handleAddToFavorites(e) {\r\n    const data = {\r\n      username: localStorage.getItem(\"email\"),\r\n      id: e.target.value,\r\n    };\r\n    axios\r\n      .post(\"http://localhost:3001/addToFavorites\", data)\r\n      .then((response) => {\r\n        if (response.status === 200) {\r\n          console.log(\"SUCCESS\");\r\n        } else if (response.status === 201) {\r\n          console.log(\"ERROR WITH FAVORITES\");\r\n        }\r\n      });\r\n  }\r\n  handleItemPage(e) {\r\n    let d = new Date();\r\n    d.setTime(d.getTime() + 25 * 60 * 1000);\r\n    document.cookie = \"id\" + \"=\" + e.target.value + \"; Path=/;\";\r\n    window.location.href = \"/product\";\r\n  }\r\n  componentWillMount() {\r\n    this.setState({\r\n      authFlag: true,\r\n      products: [],\r\n    });\r\n  }\r\n  //username change handler to update state variable with the text entered by the user\r\n  termChangeHandler = (e) => {\r\n    this.setState({\r\n      term: e.target.value,\r\n    });\r\n  };\r\n  //username change handler to update state variable with the text entered by the user\r\n  minPriceChangeHandler = (e) => {\r\n    this.setState({\r\n      minPrice: e.target.value,\r\n    });\r\n  };\r\n  //username change handler to update state variable with the text entered by the user\r\n  maxPriceChangeHandler = (e) => {\r\n    this.setState({\r\n      maxPrice: e.target.value,\r\n    });\r\n  };\r\n  selectedOptionChangeHandler = (e) => {\r\n    this.setState({\r\n      selectedOption: e.target.value,\r\n    });\r\n  };\r\n  outOfStockOptionChangeHandler = (e) => {\r\n    this.setState({\r\n      outOfStock: true,\r\n    });\r\n  };\r\n\r\n  //submit Login handler to send a request to the node backend\r\n  submitLogin = (e) => {\r\n    //var headers = new Headers();\r\n    //prevent page from refresh\r\n    e.preventDefault();\r\n    const data = {\r\n      term: this.state.term,\r\n      minPrice: this.state.minPrice,\r\n      maxPrice: this.state.maxPrice,\r\n      selectedOption: this.state.selectedOption,\r\n    };\r\n    //set the with credentials to true\r\n    axios.defaults.withCredentials = true;\r\n    //make a post request with the user data\r\n    axios.post(\"http://localhost:3001/shop/getproducts\", data).then((res) => {\r\n      if (res) {\r\n        this.setState({\r\n          authFlag: false,\r\n          products: res.data,\r\n        });\r\n      } else {\r\n        this.setState({\r\n          authFlag: true,\r\n        });\r\n      }\r\n    });\r\n  };\r\n  render() {\r\n    //iterate over books to create a table row\r\n    let details = this.state.products.map((product) => {\r\n      return (\r\n        <tr>\r\n          <td>{product.name}</td>\r\n          <td>\r\n            {product.image && (\r\n              <img src={\"http://localhost:3000/\" + product.image} alt=\"img\" />\r\n            )}\r\n          </td>\r\n          <td>${product.price}</td>\r\n          <td>\r\n            <div style={{ width: \"100%\" }}>\r\n              <Button\r\n                value={product.id}\r\n                onClick={this.handleAddToFavorites}\r\n                class=\"btn btn-success\"\r\n                type=\"submit\"\r\n              >\r\n                Favorite\r\n              </Button>\r\n            </div>\r\n          </td>\r\n          <td>\r\n            <div style={{ width: \"100%\" }}>\r\n              <Button\r\n                value={product.id}\r\n                onClick={this.handleItemPage}\r\n                class=\"btn btn-success\"\r\n                type=\"submit\"\r\n              >\r\n                More Details\r\n              </Button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n    //if not logged in go to login page\r\n    let redirectVar = null;\r\n    if (!localStorage.getItem(\"token\")) {\r\n      redirectVar = <Redirect to=\"/login\" />;\r\n    }\r\n    return (\r\n      <div>\r\n        {redirectVar}\r\n        <div class=\"container\">\r\n          <h2>Welcome to Home Page</h2>\r\n          <br />\r\n          <div style={{ width: \"100%\" }} class=\"form-group\">\r\n            <input\r\n              onChange={this.termChangeHandler}\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              name=\"term\"\r\n              placeholder=\"Search...\"\r\n            />\r\n          </div>\r\n          <div style={{ width: \"100%\" }}>\r\n            <Button\r\n              onClick={this.submitLogin}\r\n              class=\"btn btn-success\"\r\n              type=\"submit\"\r\n            >\r\n              Search\r\n            </Button>\r\n          </div>\r\n          <br />\r\n          <div style={{ width: \"15%\" }} class=\"form-check form-check-inline\">\r\n            <label class=\"form-check-label\" for=\"inLineText1\">\r\n              Minimum Price:\r\n            </label>\r\n            <input\r\n              id=\"inLineText1\"\r\n              onChange={this.minPriceChangeHandler}\r\n              type=\"number\"\r\n              class=\"form-control\"\r\n              name=\"minPrice\"\r\n            />\r\n          </div>\r\n          <div style={{ width: \"15%\" }} class=\"form-check form-check-inline\">\r\n            <label class=\"form-check-label\" for=\"inLineText2\">\r\n              Maximum Price:\r\n            </label>\r\n            <input\r\n              id=\"inLineText2\"\r\n              onChange={this.maxPriceChangeHandler}\r\n              type=\"number\"\r\n              class=\"form-control\"\r\n              name=\"maxPrice\"\r\n            />\r\n          </div>\r\n          <p>Filter Products: </p>\r\n          <div class=\"form-check form-check-inline\">\r\n            <input\r\n              id=\"inLineRadio1\"\r\n              type=\"radio\"\r\n              name=\"sortType\"\r\n              value=\"price\"\r\n              checked={this.state.selectedOption === \"price\"}\r\n              onChange={this.selectedOptionChangeHandler}\r\n              class=\"form-check-input\"\r\n            />\r\n            <label class=\"form-check-label\" for=\"inLineRadio1\">\r\n              Price: Low to High\r\n            </label>\r\n          </div>\r\n          <div class=\"form-check form-check-inline\">\r\n            <input\r\n              id=\"inLineRadio2\"\r\n              type=\"radio\"\r\n              name=\"sortType\"\r\n              value=\"quantity\"\r\n              checked={this.state.selectedOption === \"quantity\"}\r\n              onChange={this.selectedOptionChangeHandler}\r\n              class=\"form-check-input\"\r\n            />\r\n            <label class=\"form-check-label\" for=\"inLineRadio2\">\r\n              Quantity: Low to High\r\n            </label>\r\n          </div>\r\n          <div class=\"form-check form-check-inline\">\r\n            <input\r\n              id=\"inLineRadio3\"\r\n              type=\"radio\"\r\n              name=\"sortType\"\r\n              value=\"salesCount\"\r\n              checked={this.state.selectedOption === \"salesCount\"}\r\n              onChange={this.selectedOptionChangeHandler}\r\n              class=\"form-check-input\"\r\n            />\r\n            <label class=\"form-check-label\" for=\"inLineRadio3\">\r\n              {\" \"}\r\n              Sales Count: Low to High\r\n            </label>\r\n          </div>\r\n          <div class=\"form-check form-check-inline\">\r\n            <input\r\n              id=\"inLineRadio4\"\r\n              type=\"checkbox\"\r\n              name=\"outOfStock\"\r\n              checked={this.state.outOfStock}\r\n              onChange={this.outOfStockOptionChangeHandler}\r\n              class=\"form-check-input\"\r\n            />\r\n            <label class=\"form-check-label\" for=\"inLineRadio4\">\r\n              Exclude Out of Stock{\" \"}\r\n            </label>\r\n          </div>\r\n\r\n          <br />\r\n          <Table striped bordered hover variant=\"dark\">\r\n            <thead>\r\n              <tr>\r\n                <th>Name</th>\r\n                <th>Image</th>\r\n                <th>Price(USD)</th>\r\n                <th>Add to Favorites</th>\r\n                <th>More Details</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {/*Display the Tbale row based on data recieved*/}\r\n              {details}\r\n            </tbody>\r\n          </Table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n//export Home Component\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}