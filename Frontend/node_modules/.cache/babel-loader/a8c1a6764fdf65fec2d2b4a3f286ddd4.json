{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\deven\\\\OneDrive\\\\Desktop\\\\Lab2\\\\Frontend\\\\src\\\\components\\\\Shop\\\\RegisterShop.js\";\nimport React, { Component } from \"react\";\nimport \"../../App.css\";\nimport axios from \"axios\";\nimport cookie from \"react-cookies\";\nimport { Redirect } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass RegisterShop extends Component {\n  constructor(props) {\n    //Call the constrictor of Super class i.e The Component\n    super(props); //maintain the state required for this component\n\n    this.shopNameChangeHandler = e => {\n      this.setState({\n        shopName: e.target.value\n      });\n    };\n\n    this.submitLogin = e => {\n      //var headers = new Headers();\n      //prevent page from refresh\n      e.preventDefault();\n      const data = {\n        shopName: this.state.shopName,\n        username: localStorage.getItem(\"email\")\n      };\n      document.cookie = \"shopname\" + \"=\" + this.state.shopname + \"; Path=/;\";\n      axios.defaults.headers.common[\"authorization\"] = localStorage.getItem(\"token\"); //make a post request with the user data\n\n      axios.post(\"http://localhost:3001/user/registerShop\", data).then(response => {\n        if (response.status === 200) {\n          this.setState({\n            authFlag: false,\n            validName: true\n          });\n        } else {\n          this.setState({\n            authFlag: true,\n            validName: false\n          });\n        }\n      });\n    };\n\n    this.state = {\n      shopName: \"\",\n      authFlag: true,\n      validName: false\n    }; //Bind the handlers to this class\n\n    this.shopNameChangeHandler = this.shopNameChangeHandler.bind(this);\n    this.submitLogin = this.submitLogin.bind(this);\n  } //Call the Will Mount to set the auth Flag to false\n\n\n  componentWillMount() {\n    this.setState({\n      authFlag: false,\n      username: localStorage.getItem(\"email\"),\n      validName: false\n    });\n  } //email change handler to update state variable with the text entered by the user\n\n\n  render() {\n    //if not logged in go to login page\n    let redirectVar = null;\n    let pass = null;\n\n    if (!localStorage.getItem(\"token\")) {\n      redirectVar = /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this);\n    } //If password and username do not match display error\n\n\n    let {\n      authFlag\n    } = this.state;\n    let invalidID;\n\n    if (authFlag) {\n      invalidID = /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"errorClass\",\n          style: {\n            color: \"red\"\n          },\n          children: \"Error: Name is already taken. Please enter another name.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this);\n    }\n\n    let {\n      validName\n    } = this.state;\n\n    if (validName) {\n      pass = /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [redirectVar, invalidID, pass, /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Name Your Shop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Choose a memorable name that reflcts your style\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-group\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: this.shopNameChangeHandler,\n            type: \"text\",\n            class: \"form-control\",\n            name: \"shopName\",\n            placeholder: \"Enter your shop name...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.submitLogin,\n          class: \"btn btn-primary\",\n          children: \"Check\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this);\n  }\n\n} //export Home Component\n\n\nexport default RegisterShop;","map":{"version":3,"sources":["C:/Users/deven/OneDrive/Desktop/Lab2/Frontend/src/components/Shop/RegisterShop.js"],"names":["React","Component","axios","cookie","Redirect","RegisterShop","constructor","props","shopNameChangeHandler","e","setState","shopName","target","value","submitLogin","preventDefault","data","state","username","localStorage","getItem","document","shopname","defaults","headers","common","post","then","response","status","authFlag","validName","bind","componentWillMount","render","redirectVar","pass","invalidID","color"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,eAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,SAASC,QAAT,QAAyB,cAAzB;;;AAEA,MAAMC,YAAN,SAA2BJ,SAA3B,CAAqC;AACnCK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB;AACA,UAAMA,KAAN,EAFiB,CAGjB;;AAHiB,SAsBnBC,qBAtBmB,GAsBMC,CAAD,IAAO;AAC7B,WAAKC,QAAL,CAAc;AACZC,QAAAA,QAAQ,EAAEF,CAAC,CAACG,MAAF,CAASC;AADP,OAAd;AAGD,KA1BkB;;AAAA,SA4BnBC,WA5BmB,GA4BJL,CAAD,IAAO;AACnB;AACA;AACAA,MAAAA,CAAC,CAACM,cAAF;AACA,YAAMC,IAAI,GAAG;AACXL,QAAAA,QAAQ,EAAE,KAAKM,KAAL,CAAWN,QADV;AAEXO,QAAAA,QAAQ,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AAFC,OAAb;AAIAC,MAAAA,QAAQ,CAAClB,MAAT,GAAkB,aAAa,GAAb,GAAmB,KAAKc,KAAL,CAAWK,QAA9B,GAAyC,WAA3D;AAEApB,MAAAA,KAAK,CAACqB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IACEN,YAAY,CAACC,OAAb,CAAqB,OAArB,CADF,CAVmB,CAYnB;;AACAlB,MAAAA,KAAK,CACFwB,IADH,CACQ,yCADR,EACmDV,IADnD,EAEGW,IAFH,CAESC,QAAD,IAAc;AAClB,YAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,eAAKnB,QAAL,CAAc;AACZoB,YAAAA,QAAQ,EAAE,KADE;AAEZC,YAAAA,SAAS,EAAE;AAFC,WAAd;AAID,SALD,MAKO;AACL,eAAKrB,QAAL,CAAc;AACZoB,YAAAA,QAAQ,EAAE,IADE;AAEZC,YAAAA,SAAS,EAAE;AAFC,WAAd;AAID;AACF,OAdH;AAeD,KAxDkB;;AAIjB,SAAKd,KAAL,GAAa;AACXN,MAAAA,QAAQ,EAAE,EADC;AAEXmB,MAAAA,QAAQ,EAAE,IAFC;AAGXC,MAAAA,SAAS,EAAE;AAHA,KAAb,CAJiB,CASjB;;AACA,SAAKvB,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BwB,IAA3B,CAAgC,IAAhC,CAA7B;AACA,SAAKlB,WAAL,GAAmB,KAAKA,WAAL,CAAiBkB,IAAjB,CAAsB,IAAtB,CAAnB;AACD,GAbkC,CAcnC;;;AACAC,EAAAA,kBAAkB,GAAG;AACnB,SAAKvB,QAAL,CAAc;AACZoB,MAAAA,QAAQ,EAAE,KADE;AAEZZ,MAAAA,QAAQ,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFE;AAGZW,MAAAA,SAAS,EAAE;AAHC,KAAd;AAKD,GArBkC,CAsBnC;;;AAqCAG,EAAAA,MAAM,GAAG;AACP;AACA,QAAIC,WAAW,GAAG,IAAlB;AACA,QAAIC,IAAI,GAAG,IAAX;;AACA,QAAI,CAACjB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAL,EAAoC;AAClCe,MAAAA,WAAW,gBAAG,QAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,cAAd;AACD,KANM,CAOP;;;AACA,QAAI;AAAEL,MAAAA;AAAF,QAAe,KAAKb,KAAxB;AACA,QAAIoB,SAAJ;;AACA,QAAIP,QAAJ,EAAc;AACZO,MAAAA,SAAS,gBACP;AAAA,+BACE;AAAM,UAAA,SAAS,EAAC,YAAhB;AAA6B,UAAA,KAAK,EAAE;AAAEC,YAAAA,KAAK,EAAE;AAAT,WAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF;AAOD;;AACD,QAAI;AAAEP,MAAAA;AAAF,QAAgB,KAAKd,KAAzB;;AACA,QAAIc,SAAJ,EAAe;AACbK,MAAAA,IAAI,gBAAG,QAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,cAAP;AACD;;AACD,wBACE;AAAA,iBACGD,WADH,EAEGE,SAFH,EAGGD,IAHH,eAIE;AAAK,QAAA,KAAK,EAAC,WAAX;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAGE;AAAK,UAAA,KAAK,EAAC,YAAX;AAAA,iCACE;AACE,YAAA,QAAQ,EAAE,KAAK5B,qBADjB;AAEE,YAAA,IAAI,EAAC,MAFP;AAGE,YAAA,KAAK,EAAC,cAHR;AAIE,YAAA,IAAI,EAAC,UAJP;AAKE,YAAA,WAAW,EAAC;AALd;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAHF,eAYE;AAAQ,UAAA,OAAO,EAAE,KAAKM,WAAtB;AAAmC,UAAA,KAAK,EAAC,iBAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAZF;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAuBD;;AAzGkC,C,CA2GrC;;;AACA,eAAeT,YAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"../../App.css\";\r\nimport axios from \"axios\";\r\nimport cookie from \"react-cookies\";\r\nimport { Redirect } from \"react-router\";\r\n\r\nclass RegisterShop extends Component {\r\n  constructor(props) {\r\n    //Call the constrictor of Super class i.e The Component\r\n    super(props);\r\n    //maintain the state required for this component\r\n    this.state = {\r\n      shopName: \"\",\r\n      authFlag: true,\r\n      validName: false,\r\n    };\r\n    //Bind the handlers to this class\r\n    this.shopNameChangeHandler = this.shopNameChangeHandler.bind(this);\r\n    this.submitLogin = this.submitLogin.bind(this);\r\n  }\r\n  //Call the Will Mount to set the auth Flag to false\r\n  componentWillMount() {\r\n    this.setState({\r\n      authFlag: false,\r\n      username: localStorage.getItem(\"email\"),\r\n      validName: false,\r\n    });\r\n  }\r\n  //email change handler to update state variable with the text entered by the user\r\n  shopNameChangeHandler = (e) => {\r\n    this.setState({\r\n      shopName: e.target.value,\r\n    });\r\n  };\r\n  //submit Login handler to send a request to the node backend\r\n  submitLogin = (e) => {\r\n    //var headers = new Headers();\r\n    //prevent page from refresh\r\n    e.preventDefault();\r\n    const data = {\r\n      shopName: this.state.shopName,\r\n      username: localStorage.getItem(\"email\"),\r\n    };\r\n    document.cookie = \"shopname\" + \"=\" + this.state.shopname + \"; Path=/;\";\r\n\r\n    axios.defaults.headers.common[\"authorization\"] =\r\n      localStorage.getItem(\"token\");\r\n    //make a post request with the user data\r\n    axios\r\n      .post(\"http://localhost:3001/user/registerShop\", data)\r\n      .then((response) => {\r\n        if (response.status === 200) {\r\n          this.setState({\r\n            authFlag: false,\r\n            validName: true,\r\n          });\r\n        } else {\r\n          this.setState({\r\n            authFlag: true,\r\n            validName: false,\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  render() {\r\n    //if not logged in go to login page\r\n    let redirectVar = null;\r\n    let pass = null;\r\n    if (!localStorage.getItem(\"token\")) {\r\n      redirectVar = <Redirect to=\"/login\" />;\r\n    }\r\n    //If password and username do not match display error\r\n    let { authFlag } = this.state;\r\n    let invalidID;\r\n    if (authFlag) {\r\n      invalidID = (\r\n        <div>\r\n          <span className=\"errorClass\" style={{ color: \"red\" }}>\r\n            Error: Name is already taken. Please enter another name.\r\n          </span>\r\n        </div>\r\n      );\r\n    }\r\n    let { validName } = this.state;\r\n    if (validName) {\r\n      pass = <Redirect to=\"/home\" />;\r\n    }\r\n    return (\r\n      <div>\r\n        {redirectVar}\r\n        {invalidID}\r\n        {pass}\r\n        <div class=\"container\">\r\n          <h2>Name Your Shop</h2>\r\n          <p>Choose a memorable name that reflcts your style</p>\r\n          <div class=\"form-group\">\r\n            <input\r\n              onChange={this.shopNameChangeHandler}\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              name=\"shopName\"\r\n              placeholder=\"Enter your shop name...\"\r\n            />\r\n          </div>\r\n          <button onClick={this.submitLogin} class=\"btn btn-primary\">\r\n            Check\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n//export Home Component\r\nexport default RegisterShop;\r\n"]},"metadata":{},"sourceType":"module"}