{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\deven\\\\OneDrive\\\\Desktop\\\\Lab2\\\\Frontend\\\\src\\\\components\\\\Cart\\\\Cart.js\";\nimport React, { Component } from \"react\";\nimport \"../../App.css\";\nimport axios from \"axios\";\nimport cookie from \"react-cookies\";\nimport { Redirect } from \"react-router\";\nimport Button from \"react-bootstrap/Button\";\nimport { Link } from \"react-router-dom\";\nimport Table from \"react-bootstrap/Table\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Cart extends Component {\n  constructor() {\n    super();\n\n    this.messageHandler = e => {\n      this.setState({\n        messages: e.target.value\n      });\n    };\n\n    this.quantityHandler = e => {\n      this.setState({\n        quantity: e.target.value\n      });\n    };\n\n    this.submitGift = e => {\n      //e.preventDefault();\n      const data = {\n        id: e.target.value,\n        username: localStorage.getItem(\"email\"),\n        messages: this.state.messages\n      }; //make a post request with the user data\n\n      axios.post(\"http://localhost:3001/shop/addMessage\", data).then(res => {\n        if (res.data === \"SUCCESS\") {\n          console.log(\"added descriptoin\");\n        } else {\n          console.log(\"falied to add descriptoin\");\n        }\n      });\n    };\n\n    this.submitDelete = e => {\n      //e.preventDefault();\n      const data = {\n        id: e.target.value,\n        username: localStorage.getItem(\"email\")\n      }; //make a post request with the user data\n\n      axios.post(\"http://localhost:3001/shop/deleteItem\", data).then(res => {\n        if (res.data === \"SUCCESS\") {\n          console.log(\"added descriptoin\");\n        } else {\n          console.log(\"falied to add descriptoin\");\n        }\n      });\n    };\n\n    this.submitUpdateQuantity = e => {\n      //e.preventDefault();\n      const data = {\n        id: e.target.value,\n        username: localStorage.getItem(\"email\")\n      }; //make a post request with the user data\n\n      axios.post(\"http://localhost:3001/shop/deleteItem\", data).then(res => {\n        if (res.data === \"SUCCESS\") {\n          console.log(\"added descriptoin\");\n        } else {\n          console.log(\"falied to add descriptoin\");\n        }\n      });\n    };\n\n    this.submitLogin = e => {\n      e.preventDefault();\n      const data = {\n        items: this.state.items,\n        username: localStorage.getItem(\"email\"),\n        total: this.state.total,\n        message: this.state.messages\n      }; //make a post request with the user data\n\n      axios.post(\"http://localhost:3001/shop/purchase\", data).then(res => {\n        if (res.data === \"SUCCESS\") {\n          this.setState({\n            authFlag: true\n          });\n        } else {\n          this.setState({\n            authFlag: false\n          });\n        }\n      });\n    };\n\n    this.state = {\n      total: [],\n      items: [],\n      messages: \"\",\n      quantity: \"\",\n      newquantity: 1,\n      username: localStorage.getItem(\"email\"),\n      authFlag: false\n    };\n    this.messageHandler = this.messageHandler.bind(this);\n    this.quantityHandler = this.quantityHandler.bind(this);\n  } //username change handler to update state variable with the text entered by the user\n\n\n  componentDidMount() {\n    const data = {\n      username: localStorage.getItem(\"email\")\n    };\n    axios.post(\"http://localhost:3001/shop/getCart\", data).then(response => {\n      if (response) {\n        console.log(response);\n        this.setState({\n          items: this.state.items.concat(response.data[0]),\n          total: this.state.total.concat(response.data[1])\n        });\n      } else {\n        console.log(\"Error passing items in cart\");\n      }\n    });\n  }\n\n  render() {\n    //iterate over books to create a table row\n    let details = this.state.items.map(item => {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            value: item.name,\n            onClick: this.submitDelete,\n            class: \"btn btn-primary\",\n            children: \"Remove\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: item.image && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"http://localhost:3000/\" + item.image,\n            alt: \"img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: this.quantityHandler,\n            type: \"number\",\n            class: \"form-control\",\n            name: \"quantity\",\n            placeholder: item.quantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            value: item.name,\n            onClick: this.submitUpdateQuantity,\n            class: \"btn btn-primary\",\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: [\"$\", item.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            value: item.name,\n            onClick: this.submitGift,\n            class: \"btn btn-primary\",\n            children: \"Make Gift\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: this.messageHandler,\n            type: \"text\",\n            class: \"form-control\",\n            name: \"message\",\n            placeholder: \"Write a Message Here...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this);\n    }); //if not logged in go to login page\n\n    let redirectVar = null;\n\n    if (!localStorage.getItem(\"token\")) {\n      redirectVar = /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 21\n      }, this);\n    }\n\n    let {\n      authFlag\n    } = this.state;\n    let validPurchase = null;\n\n    if (authFlag) {\n      validPurchase = /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/purchases\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 23\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [redirectVar, validPurchase, /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Shopping Cart Page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          variant: \"dark\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Remove Item\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Item\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Is Gift\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Message\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: details\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Total Price: $\", this.state.total]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.submitLogin,\n          children: \"Submit Order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this);\n  }\n\n} //export Home Component\n\n\nexport default Cart;","map":{"version":3,"sources":["C:/Users/deven/OneDrive/Desktop/Lab2/Frontend/src/components/Cart/Cart.js"],"names":["React","Component","axios","cookie","Redirect","Button","Link","Table","Cart","constructor","messageHandler","e","setState","messages","target","value","quantityHandler","quantity","submitGift","data","id","username","localStorage","getItem","state","post","then","res","console","log","submitDelete","submitUpdateQuantity","submitLogin","preventDefault","items","total","message","authFlag","newquantity","bind","componentDidMount","response","concat","render","details","map","item","name","image","price","redirectVar","validPurchase"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"../../App.css\";\r\nimport axios from \"axios\";\r\nimport cookie from \"react-cookies\";\r\nimport { Redirect } from \"react-router\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Table from \"react-bootstrap/Table\";\r\nclass Cart extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      total: [],\r\n      items: [],\r\n      messages: \"\",\r\n      quantity: \"\",\r\n      newquantity: 1,\r\n      username: localStorage.getItem(\"email\"),\r\n      authFlag: false,\r\n    };\r\n    this.messageHandler = this.messageHandler.bind(this);\r\n    this.quantityHandler = this.quantityHandler.bind(this);\r\n  }\r\n  //username change handler to update state variable with the text entered by the user\r\n  messageHandler = (e) => {\r\n    this.setState({\r\n      messages: e.target.value,\r\n    });\r\n  };\r\n  quantityHandler = (e) => {\r\n    this.setState({\r\n      quantity: e.target.value,\r\n    });\r\n  };\r\n  submitGift = (e) => {\r\n    //e.preventDefault();\r\n    const data = {\r\n      id: e.target.value,\r\n      username: localStorage.getItem(\"email\"),\r\n      messages: this.state.messages,\r\n    };\r\n    //make a post request with the user data\r\n    axios.post(\"http://localhost:3001/shop/addMessage\", data).then((res) => {\r\n      if (res.data === \"SUCCESS\") {\r\n        console.log(\"added descriptoin\");\r\n      } else {\r\n        console.log(\"falied to add descriptoin\");\r\n      }\r\n    });\r\n  };\r\n\r\n  submitDelete = (e) => {\r\n    //e.preventDefault();\r\n    const data = {\r\n      id: e.target.value,\r\n      username: localStorage.getItem(\"email\"),\r\n    };\r\n    //make a post request with the user data\r\n    axios.post(\"http://localhost:3001/shop/deleteItem\", data).then((res) => {\r\n      if (res.data === \"SUCCESS\") {\r\n        console.log(\"added descriptoin\");\r\n      } else {\r\n        console.log(\"falied to add descriptoin\");\r\n      }\r\n    });\r\n  };\r\n\r\n  submitUpdateQuantity = (e) => {\r\n    //e.preventDefault();\r\n    const data = {\r\n      id: e.target.value,\r\n      username: localStorage.getItem(\"email\"),\r\n    };\r\n    //make a post request with the user data\r\n    axios.post(\"http://localhost:3001/shop/deleteItem\", data).then((res) => {\r\n      if (res.data === \"SUCCESS\") {\r\n        console.log(\"added descriptoin\");\r\n      } else {\r\n        console.log(\"falied to add descriptoin\");\r\n      }\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    const data = {\r\n      username: localStorage.getItem(\"email\"),\r\n    };\r\n    axios.post(\"http://localhost:3001/shop/getCart\", data).then((response) => {\r\n      if (response) {\r\n        console.log(response);\r\n        this.setState({\r\n          items: this.state.items.concat(response.data[0]),\r\n          total: this.state.total.concat(response.data[1]),\r\n        });\r\n      } else {\r\n        console.log(\"Error passing items in cart\");\r\n      }\r\n    });\r\n  }\r\n  submitLogin = (e) => {\r\n    e.preventDefault();\r\n    const data = {\r\n      items: this.state.items,\r\n      username: localStorage.getItem(\"email\"),\r\n      total: this.state.total,\r\n      message: this.state.messages,\r\n    };\r\n    //make a post request with the user data\r\n    axios.post(\"http://localhost:3001/shop/purchase\", data).then((res) => {\r\n      if (res.data === \"SUCCESS\") {\r\n        this.setState({\r\n          authFlag: true,\r\n        });\r\n      } else {\r\n        this.setState({\r\n          authFlag: false,\r\n        });\r\n      }\r\n    });\r\n  };\r\n  render() {\r\n    //iterate over books to create a table row\r\n    let details = this.state.items.map((item) => {\r\n      return (\r\n        <tr>\r\n          <td>\r\n            <Button\r\n              value={item.name}\r\n              onClick={this.submitDelete}\r\n              class=\"btn btn-primary\"\r\n            >\r\n              Remove\r\n            </Button>\r\n          </td>\r\n          <td>\r\n            {item.image && (\r\n              <img src={\"http://localhost:3000/\" + item.image} alt=\"img\" />\r\n            )}\r\n          </td>\r\n          <td>{item.name}</td>\r\n          <td>\r\n            <input\r\n              onChange={this.quantityHandler}\r\n              type=\"number\"\r\n              class=\"form-control\"\r\n              name=\"quantity\"\r\n              placeholder={item.quantity}\r\n            />\r\n            <Button\r\n              value={item.name}\r\n              onClick={this.submitUpdateQuantity}\r\n              class=\"btn btn-primary\"\r\n            >\r\n              Update\r\n            </Button>\r\n          </td>\r\n          <td>${item.price}</td>\r\n          <td>\r\n            <Button\r\n              value={item.name}\r\n              onClick={this.submitGift}\r\n              class=\"btn btn-primary\"\r\n            >\r\n              Make Gift\r\n            </Button>\r\n          </td>\r\n          <td>\r\n            <input\r\n              onChange={this.messageHandler}\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              name=\"message\"\r\n              placeholder=\"Write a Message Here...\"\r\n            />\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n    //if not logged in go to login page\r\n    let redirectVar = null;\r\n    if (!localStorage.getItem(\"token\")) {\r\n      redirectVar = <Redirect to=\"/login\" />;\r\n    }\r\n    let { authFlag } = this.state;\r\n    let validPurchase = null;\r\n    if (authFlag) {\r\n      validPurchase = <Redirect to=\"/purchases\" />;\r\n    }\r\n    return (\r\n      <div>\r\n        {redirectVar}\r\n        {validPurchase}\r\n        <div class=\"container\">\r\n          <h2>Shopping Cart Page</h2>\r\n          <Table striped bordered hover variant=\"dark\">\r\n            <thead>\r\n              <tr>\r\n                <th>Remove Item</th>\r\n                <th>Item</th>\r\n                <th>Name</th>\r\n                <th>Quantity</th>\r\n                <th>Price</th>\r\n                <th>Is Gift</th>\r\n                <th>Message</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {/*Display the Tbale row based on data recieved*/}\r\n              {details}\r\n            </tbody>\r\n          </Table>\r\n        </div>\r\n        <div class=\"container\">\r\n          <h3>Total Price: ${this.state.total}</h3>\r\n          <Button onClick={this.submitLogin}>Submit Order</Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n//export Home Component\r\nexport default Cart;\r\n"]},"metadata":{},"sourceType":"module"}