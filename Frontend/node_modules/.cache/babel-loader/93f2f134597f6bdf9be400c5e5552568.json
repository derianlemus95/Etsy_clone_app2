{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\deven\\\\OneDrive\\\\Desktop\\\\Lab2\\\\Frontend\\\\src\\\\components\\\\Purchases\\\\Purchases.js\";\nimport React, { Component } from \"react\";\nimport \"../../App.css\";\nimport axios from \"axios\";\nimport cookie from \"react-cookies\";\nimport { Redirect } from \"react-router\";\nimport Button from \"react-bootstrap/Button\";\nimport Table from \"react-bootstrap/Table\";\nimport { Link } from \"react-router-dom\";\nimport DataTable from \"react-data-table-component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Purchases extends Component {\n  constructor() {\n    super();\n    this.state = {\n      total: [],\n      items: [],\n      username: localStorage.getItem(\"email\")\n    };\n  }\n\n  handleSubmit(e) {}\n\n  componentDidMount() {\n    const data = {\n      username: localStorage.getItem(\"email\")\n    };\n    axios.post(\"http://localhost:3001/shop/purchaseHistory\", data).then(response => {\n      if (response) {\n        this.setState({\n          items: this.state.items.concat(response.data[0]),\n          total: this.state.total.concat(response.data[1])\n        });\n      } else {\n        console.log(\"Error passing items in cart\");\n      }\n    });\n  }\n\n  render() {\n    const columns = [{\n      name: \"Order ID\",\n      selector: row => row._id,\n      sortable: true\n    }, {\n      name: \"Name\",\n      selector: row => row.name,\n      sortable: true\n    }, {\n      name: \"Image\",\n      selector: row => row.image,\n      sortable: false\n    }, {\n      name: \"Gift Description\",\n      selector: row => row.giftDesc,\n      sortable: false\n    }, {\n      name: \"Quantity\",\n      selector: row => row.quantity,\n      sortable: true\n    }, {\n      name: \"Price\",\n      selector: row => row.price,\n      sortable: true\n    }]; //iterate over books to create a table row\n\n    let details = this.state.items.map(item => {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          children: item._id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: item.image && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"http://localhost:3000/\" + item.image,\n            alt: \"img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: item.giftDesc\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: item.quantity\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: [\"@ $\", item.price, \" each\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this);\n    }); //if not logged in go to login page\n\n    let redirectVar = null;\n\n    if (!localStorage.getItem(\"token\")) {\n      redirectVar = /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [redirectVar, /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Purchase History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          variant: \"dark\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Order ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Item\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Gift Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: details\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DataTable, {\n          pagination: true,\n          columns: columns,\n          data: this.state.items,\n          paginationRowsPerPageOptions: [2, 5, 10]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this);\n  }\n\n} //export Home Component\n\n\nexport default Purchases;","map":{"version":3,"sources":["C:/Users/deven/OneDrive/Desktop/Lab2/Frontend/src/components/Purchases/Purchases.js"],"names":["React","Component","axios","cookie","Redirect","Button","Table","Link","DataTable","Purchases","constructor","state","total","items","username","localStorage","getItem","handleSubmit","e","componentDidMount","data","post","then","response","setState","concat","console","log","render","columns","name","selector","row","_id","sortable","image","giftDesc","quantity","price","details","map","item","redirectVar"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"../../App.css\";\r\nimport axios from \"axios\";\r\nimport cookie from \"react-cookies\";\r\nimport { Redirect } from \"react-router\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Table from \"react-bootstrap/Table\";\r\nimport { Link } from \"react-router-dom\";\r\nimport DataTable from \"react-data-table-component\";\r\nclass Purchases extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      total: [],\r\n      items: [],\r\n      username: localStorage.getItem(\"email\"),\r\n    };\r\n  }\r\n\r\n  handleSubmit(e) {}\r\n\r\n  componentDidMount() {\r\n    const data = {\r\n      username: localStorage.getItem(\"email\"),\r\n    };\r\n    axios\r\n      .post(\"http://localhost:3001/shop/purchaseHistory\", data)\r\n      .then((response) => {\r\n        if (response) {\r\n          this.setState({\r\n            items: this.state.items.concat(response.data[0]),\r\n            total: this.state.total.concat(response.data[1]),\r\n          });\r\n        } else {\r\n          console.log(\"Error passing items in cart\");\r\n        }\r\n      });\r\n  }\r\n  render() {\r\n    const columns = [\r\n      {\r\n        name: \"Order ID\",\r\n        selector: (row) => row._id,\r\n        sortable: true,\r\n      },\r\n      {\r\n        name: \"Name\",\r\n        selector: (row) => row.name,\r\n        sortable: true,\r\n      },\r\n      {\r\n        name: \"Image\",\r\n        selector: (row) => row.image,\r\n        sortable: false,\r\n      },\r\n      {\r\n        name: \"Gift Description\",\r\n        selector: (row) => row.giftDesc,\r\n        sortable: false,\r\n      },\r\n      {\r\n        name: \"Quantity\",\r\n        selector: (row) => row.quantity,\r\n        sortable: true,\r\n      },\r\n      {\r\n        name: \"Price\",\r\n        selector: (row) => row.price,\r\n        sortable: true,\r\n      },\r\n    ];\r\n    //iterate over books to create a table row\r\n    let details = this.state.items.map((item) => {\r\n      return (\r\n        <tr>\r\n          <td>{item._id}</td>\r\n          <td>{item.name}</td>\r\n          <td>\r\n            {item.image && (\r\n              <img src={\"http://localhost:3000/\" + item.image} alt=\"img\" />\r\n            )}\r\n          </td>\r\n          <td>{item.giftDesc}</td>\r\n          <td>{item.quantity}</td>\r\n          <td>@ ${item.price} each</td>\r\n        </tr>\r\n      );\r\n    });\r\n    //if not logged in go to login page\r\n    let redirectVar = null;\r\n    if (!localStorage.getItem(\"token\")) {\r\n      redirectVar = <Redirect to=\"/login\" />;\r\n    }\r\n    return (\r\n      <div>\r\n        {redirectVar}\r\n        <div class=\"container\">\r\n          <h2>Purchase History</h2>\r\n          <Table striped bordered hover variant=\"dark\">\r\n            <thead>\r\n              <tr>\r\n                <th>Order ID</th>\r\n                <th>Name</th>\r\n                <th>Item</th>\r\n                <th>Gift Description</th>\r\n                <th>Quantity</th>\r\n                <th>Price</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {/*Display the Tbale row based on data recieved*/}\r\n              {details}\r\n            </tbody>\r\n          </Table>\r\n          <DataTable\r\n            pagination\r\n            columns={columns}\r\n            data={this.state.items}\r\n            paginationRowsPerPageOptions={[2, 5, 10]}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n//export Home Component\r\nexport default Purchases;\r\n"]},"metadata":{},"sourceType":"module"}